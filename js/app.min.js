window.onload=(()=>{setTimeout(()=>{document.getElementById("onload").classList.add("ocultarPreLoading");const e=new MovieDB,t=new Interfaz,o=document.getElementById("text-search"),s=document.getElementById("divSearch"),l=document.getElementById("resultado-2"),i=document.querySelector(".contenedor-carousel"),n=document.getElementById("flecha-izquierda"),c=document.getElementById("flecha-derecha"),a=document.getElementById("icon-search"),r=document.querySelector(".contenedor-resultados-buscador");function d(e,t){let o;return(...s)=>{const l=this;clearTimeout(o),o=setTimeout(()=>e.apply(l,s),t)}}e.ProximosEstrenos().then(e=>{t.PeliculasAExtrenar(e)}),a.addEventListener("click",l=>{r.classList.toggle("active"),l.preventDefault();const i=o.value;""!==i&&e.buscarPeliculasAPI(i).then(e=>{e.length>0?(s.style.display="none",o.value="",t.LimpiarResultados(),t.MostrarPeliculas(e)):t.LimpiarResultados()})}),c.addEventListener("click",()=>{i.scrollLeft+=i.offsetWidth}),n.addEventListener("click",()=>{i.scrollLeft-=i.offsetWidth}),document.body.addEventListener("click",i=>{if(i.preventDefault(),"btnMore"===i.target.id){const o=i.target.value;e.ObtenerPeliculaAPI(o).then(e=>{s.style.display="none",l.innerHTML="",window.scrollTo({top:435,behavior:"smooth"});let o=e.objetosApis[3].backdrops.length>0?e.objetosApis[3].backdrops[0]:"";t.LimpiarResultados(),t.MostrarDetallePelicula(e.objetosApis[0],e.objetosApis[2].results,o),t.MostrarPeliculasSimilares(e.objetosApis[1])})}if("movie-selected"===i.target.className){const n=i.target.value;e.ObtenerPeliculaAPI(n).then(e=>{r.classList.remove("active"),window.scrollTo({top:424,behavior:"smooth"}),s.style.display="none",o.value="",l.innerHTML="";let i=e.objetosApis[3].backdrops.length>0?e.objetosApis[3].backdrops[0]:"";t.LimpiarResultados(),t.MostrarDetallePelicula(e.objetosApis[0],e.objetosApis[2].results,i),t.MostrarPeliculasSimilares(e.objetosApis[1])})}}),o.addEventListener("keyup",d(o=>{const l=o.target.value;""!==l?e.BuscarPeliculaClave(l).then(e=>{t.LimpiarResultadosDivSearch(),t.MostrarResultadosDeBusquedaEnElInput(e),s.style.display="block"}):s.style.display="none"},500));const u=document.querySelector(".cerrar-x"),m=document.querySelector(".content-modal"),p=document.querySelector(".modal-contenedor"),y=document.querySelector(".img-movie");document.body.addEventListener("click",e=>{if(e.target.classList.contains("img-open")){document.querySelectorAll(".img-open").forEach(e=>{e.addEventListener("click",e=>{e.stopPropagation();const t=e.target.getAttribute("src");y.setAttribute("src",t),p.style.opacity="1",p.style.visibility="visible",m.classList.toggle("modal-close")})})}}),u.addEventListener("click",e=>{e.preventDefault(),m.classList.toggle("modal-close"),setTimeout(function(){p.style.opacity="0",p.style.visibility="hidden"},600)}),window.addEventListener("click",e=>{e.preventDefault(),e.target==p&&(m.classList.toggle("modal-close"),setTimeout(()=>{p.style.opacity="0",p.style.visibility="hidden"},900))}),window.addEventListener("scroll",d(e=>{document.body.scrollTop>20||document.documentElement.scrollTop>20?document.querySelector(".go-top-container").classList.add("show"):document.querySelector(".go-top-container").classList.remove("show")},200)),document.querySelector(".go-top-container").addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}),document.body.addEventListener("click",e=>{"text-center mt-3 verPelisimilar"==e.target.className&&window.scrollTo({top:480,behavior:"smooth"})})},1700)});